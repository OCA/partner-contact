<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

      <!-- Adds title_bank_account,observation and active fields in res.bank form view -->
      <record id="view_partner_bank_inherit_add_form" model="ir.ui.view">
        <field name="name">res.partner.bank.inherit.add.form</field>
        <field name="model">res.partner.bank</field>
        <field name="inherit_id" ref="base.view_partner_bank_form"/>
        <field name="arch" type="xml">
          <field name="state" position="before">
              <field name="title_bank_account"/>
          </field>
          <field name="acc_number" position="after">
              <field name="active"/>
          </field>
          <xpath expr="//form[@string='Bank account']/group[2]"
               position="after">
           <group>
              <field name="observation"/>
           </group>
        </xpath>
        </field>
      </record>

      <!--Add active field in tree view-->
      <record id="view_partner_bank_inherit_active_tree" model="ir.ui.view">
        <field name="name">res.partner.bank.inherit.active.tree</field>
        <field name="model">res.partner.bank</field>
        <field name="inherit_id" ref="base.view_partner_bank_tree"/>
        <field name="arch" type="xml">
          <field name="state" position="before">
              <field name="active"/>
          </field>
        </field>
      </record>

      <!--redefine bank_ids tree-->
    <record id="view_partner_property_bank_form" model="ir.ui.view">
      <field name="name">res.partner.property.bank.inherit.bank.form</field>
      <field name="model">res.partner</field>
      <field name="inherit_id" ref="account.view_partner_property_form"/>
      <field name="arch" type="xml">
        <!--redefine bank_ids tree-->
        <field name="bank_ids" position="replace">
          <group string="Banks">
            <field name="bank_ids"
                   context="{'default_partner_id': active_id, 'form_view_ref': 'base.view_partner_bank_form'}">
              <tree string="Bank Details">
                <field name="active"/>
                <field name="state" invisible="1"/>
                <field name="sequence" invisible="1"/>
                <field name="acc_number"/>
                <field name="bank_name"/>
                <field name="owner_name"/>
              </tree>
            </field>
          </group>
        </field>
      </field>
    </record>
    </data>
</openerp>
