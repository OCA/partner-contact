<?xml version="1.0" encoding="utf-8"?>
<openerp>
  <data>
    <template id="partner_activity_report.report_partner_activity_def">
      <t t-call="report.external_layout">
        <div class="page">
          <p t-if="option_selected.partner_information">
          	<h2>
            <span>Partner Informations</span>
            </h2>
          <table class="table">
            <thead>
              <tr>
                <th>Name</th>
                <th>Code</th>
                <th>Categories</th>
              </tr>
            </thead>
            <tbody class="invoice_tbody">
				<tr>
					<td>
                        <span t-field="o.name"/>
                    </td>
                    <td>
                        <span t-field="o.ref"/>
                    </td>
                    <td>
                        <t t-if="o.category_id" t-foreach="o.category_id" t-as="categ">
                            <p><t t-esc="categ.name"/></p>
                        </t>
                        <span t-if="not o.category_id">/</span>
					</td>            	
                </tr>
            </tbody>
          </table>
		  </p>
          <p t-if="option_selected.partner_information">
          	<h2>
            <span>Address Informations</span>
            </h2>
          <table class="table">
            <thead>
              <tr>
                <th>Street</th>
                <th>Street Additional</th>
                <th>PoBox</th>
                <th>Zip</th>
                <th>City</th>
                <th>Country</th>
              </tr>
            </thead>
            <tbody class="invoice_tbody">
				<tr>
					<td>
                        <span t-field="o.street"/>
                    </td>
					<td>
                        <span t-field="o.street2"/>
                    </td>
					<td>
                        <span t-field="o.zip"/>
                    </td>
					<td>
                        <span t-field="o.city"/>
                    </td>
					<td>
                        <span t-field="o.country_id.name"/>
                    </td>
                </tr>
            </tbody>
          </table>
		  </p>

          <p t-if="option_selected.partner_address_information">
          	<h2>
            <span>Partner Contacts</span>
            </h2>
          <table class="table">
            <thead>
              <tr>
                <th>Name</th>
                <th>Function</th>
                <th>Phone</th>
                <th>Mobile</th>
                <th>Email</th>
              </tr>
            </thead>
            <tbody class="invoice_tbody">
               <tr t-if="len(o.child_ids) > 0" t-foreach="o.child_ids" t-as="l">
					<td>
                        <span t-field="l.name"/>
                    </td>
					<td>
                        <span t-field="l.function"/>
                    </td>
					<td>
                        <span t-field="l.phone"/>
                    </td>
					<td>
                        <span t-field="l.mobile"/>
                    </td>
					<td>
                        <span t-field="l.email"/>
                    </td>
                </tr>
                <tr t-if="len(o.child_ids) == 0">
                    <td colspan="5"><span>No records</span></td>
                </tr>
            </tbody>
          </table>
		  </p>

          <p t-if="option_selected.partner_crm_renouvellement">
          	<h2>
            <span>Partner Contracts Renewals</span>
            </h2>
          <table class="table">
            <thead>
              <tr>
                <th>Description</th>
                <th>Date Deadline</th>
                <th>Quantity</th>
                <th>Planned revenue</th>
                <th>Created date</th>
              </tr>
            </thead>
            <tbody class="invoice_tbody">
               <tr t-if="len(get_partner_crm_informations(o)) > 0" t-foreach="get_partner_crm_informations(o)" t-as="c">
					<td>
                        <span t-field="c.name"/>
                    </td>
					<td>
                        <span t-field="c.date_deadline"/>
                    </td>
					<td>
                        <span t-field="c.phone"/>
                    </td>
					<td>
                        <span t-field="c.mobile"/>
                    </td>
					<td>
                        <span t-field="c.email_from"/>
                    </td>
                </tr>
                <tr t-if="len(get_partner_crm_informations(o)) == 0">
                    <td colspan="5"><span>No records</span></td>
                </tr>
            </tbody>
          </table>
		  </p>
          
          <p t-if="option_selected.partner_invoice">
          	<h2>
            <span>Partner Invoices</span>
            </h2>
          <table class="table">
            <thead>
              <tr>
                <th>Reference</th>
                <th>Description</th>
                <th>State</th>
                <th>Date</th>
                <th>Amount</th>
              </tr>
            </thead>
            <tbody class="invoice_tbody">
               <tr t-if="len(get_partner_invoice_informations(o)) > 0" t-foreach="get_partner_invoice_informations(o)" t-as="i">
					<td>
                        <span t-if="i.number" t-field="i.number"/>
                        <span t-if="not i.number">/</span>
                    </td>
					<td>
                        <span t-field="i.comment"/>
                    </td>
					<td>
                        <span t-field="i.state"/>
                    </td>
					<td>
                        <span t-field="i.date_invoice"/>
                    </td>
					<td>
                        <span t-field="i.amount_total"/>
                    </td>
                </tr>
                <tr t-if="len(get_partner_invoice_informations(o)) == 0">
                    <td colspan="5"><span>No records</span></td>
                </tr>
            </tbody>
          </table>
		  </p>
          
          <p t-if="option_selected.partner_sales_order">
          	<h2>
            <span>Partner Sales Order</span>
            </h2>
          <table class="table">
            <thead>
              <tr>
                <th>Description</th>
                <th>Salesman</th>
                <th>Date</th>
                <th>Amount</th>
                <th>State</th>
              </tr>
            </thead>
            <tbody class="invoice_tbody">
               <tr t-if="len(get_partner_sales_informations(o)) > 0" t-foreach="get_partner_sales_informations(o)" t-as="s">
					<td>
                        <span t-field="s.name"/>
                    </td>
					<td>
                        <span t-field="s.user_id.name"/>
                    </td>
					<td>
                        <span t-field="s.date_order"/>
                    </td>
					<td>
                        <span t-field="s.amount_total"/>
                    </td>
					<td>
                        <span t-field="s.state"/>
                    </td>
                </tr>
                <tr t-if="len(get_partner_sales_informations(o)) == 0">
                    <td colspan="5"><span>No records</span></td>
                </tr>
            </tbody>
          </table>
		  </p>
          
          <p t-if="option_selected.partner_delivery_lines">
          	<h2>
            <span>Partner Delivery Lines</span>
            </h2>
          <table class="table">
            <thead>
              <tr>
                <th>Product</th>
                <th>Serial</th>
                <th>Reference</th>
              </tr>
            </thead>
            <tbody class="invoice_tbody">
               <tr t-if="len(get_partner_deliveries_informations(o)) > 0" t-foreach="get_partner_deliveries_informations(o)" t-as="m">
					<td>
                        <span t-field="m.name"/>
                    </td>
					<td>
                        <span t-field="m.product_id.ean13"/>
                    </td>
					<td>
                        <span t-field="m.origin"/>
                    </td>
                </tr>
                <tr t-if="len(get_partner_deliveries_informations(o)) == 0">
                    <td colspan="3"><span>No records</span></td>
                </tr>
            </tbody>
          </table>
		  </p>
    	 </div>

      </t>
    </template>

	 <template id="partner_activity_report.report_partner_activity_qweb">
		 <style type="text/css">
		 .total { border-top: 5px double darkgrey !important; }
		 .subtotal { border-top: 2px solid darkgrey !important; }
		 .col-separator { border-right: 3px solid lightgrey !important; }
		 .large-text { min-height: 50px !important;}
		 </style>
			 <t t-call="report.html_container">
			 <t t-foreach="doc_ids" t-as="doc_id">
			 <t t-raw="translate_doc(doc_id, doc_model, 'user_id.lang', 'partner_activity_report.report_partner_activity_def')"/>
			 </t>
		 </t>
	 </template>
  </data>
</openerp>

